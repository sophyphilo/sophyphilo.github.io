<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Sophyphilo's Blog]]></title>
  <link href="http://sophyphilo.github.io/atom.xml" rel="self"/>
  <link href="http://sophyphilo.github.io/"/>
  <updated>2015-02-26T17:21:59+08:00</updated>
  <id>http://sophyphilo.github.io/</id>
  <author>
    <name><![CDATA[sophyphilo]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[如何使用github和octopress搭建blog]]></title>
    <link href="http://sophyphilo.github.io/blog/20150226/setup-octopress/"/>
    <updated>2015-02-26T15:08:07+08:00</updated>
    <id>http://sophyphilo.github.io/blog/20150226/setup-octopress</id>
    <content type="html"><![CDATA[<p>折腾了一些时间, 终于把blog在github上面搭建起来了, 非常感谢<br />
  <a href="http://shengmingzhiqing.com/blog/octopress-tutorials-toc.html/">http://shengmingzhiqing.com/blog/octopress-tutorials-toc.html/</a> 这篇博文的作者.   </p>

<p><code>如何使用github和octopress搭建blog</code> 这个话题, 上面的博文已经讲得非常清晰了, 有兴趣的同学仔细研究那篇博文就可以, 我就不再废话了, 哈哈~~    </p>

<p>下面主要说一下在搭建中遇到的问题以及那篇博文没有介绍的一些内容, 做个备忘:   </p>

<p><!--more--></p>

<h4 id="section">1. 分类列表不支持中文</h4>
<p>按照 <a href="http://shengmingzhiqing.com/blog/octopress-lean-modification-5.html/#section">http://shengmingzhiqing.com/blog/octopress-lean-modification-5.html/#section</a> 的方法制作分类目录的插件, 但是在 <code>rake generate</code> 后, 出现如下错误:   </p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">Liquid error: incompatible encoding regexp match (ASCII-8BIT regexp with UTF-8 string)</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>最终在这里 <a href="http://pfmiles.github.io/blog/liquid-error-about-regexp-match-when-using-octopress-tagcloud/">http://pfmiles.github.io/blog/liquid-error-about-regexp-match-when-using-octopress-tagcloud/</a> 找到了答案, 我采用了第二种方法, 在正则式后加上u选项, 将</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">category_url = File.join(category_dir, category.gsub(/_|\P{Word}/, '-').gsub(/-{2,}/, '-').downcase)</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>改为</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">category_url = File.join(category_dir, category.gsub(/_|\P{Word}/u, '-').gsub(/-{2,}/u, '-').downcase)</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="blog">2. 如何加快blog的访问速度</h4>
<p>历经千辛万苦搭建完blog, 很兴奋的用markdown写篇测试博文, <code>rake deploy</code>, 在chrome中浏览却发现加载页面的速度慢如蜗牛……, 看了看_config.yml, 瞥见了google plus, twitter, 万恶的GFW…… <br />
  看<a href="http://droidyue.com/blog/2014/06/22/fix-octopress-slow-loading-speed-issue-in-china-mainland/">这里</a>, 经过一番清理, 提速不少~~</p>

<h4 id="section-1">3. 在侧边栏添加访客地图</h4>

<p>使用第三方提供的服务, 从<a href="http://www.revolvermaps.com/?target=setup">这里</a>获取js代码.  </p>

<h5 id="sourceincludescustomasides-visitorhtml">3.1 在 source/_includes/custom/asides/ 路径下添加visitor.html</h5>
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>source/_includes/custom/asides/visitor.html </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="html"><span class="line">  <span class="nt">&lt;section&gt;</span>
</span><span class="line">      <span class="nt">&lt;h1&gt;</span>访客地图<span class="nt">&lt;/h1&gt;</span>
</span><span class="line">          <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;//rj.revolvermaps.com/0/0/1.js?i=9ojojv7pf1u&amp;amp;s=220&amp;amp;m=0&amp;amp;v=true&amp;amp;r=false&amp;amp;b=000000&amp;amp;n=false&amp;amp;c=ff0000&quot;</span> <span class="na">async=</span><span class="s">&quot;async&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class="line">  <span class="nt">&lt;/section&gt;</span>
</span><span class="line">
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h5 id="visitorhtml">3.2 将visitor.html加入主页面</h5>
<p>修改_config.yml, 将visitor.html 加入 <code>default_asides</code>.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>_config.yml中的default_asides </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="yaml"><span class="line">  <span class="l-Scalar-Plain">default_asides</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">custom/asides/category_list.html</span><span class="p-Indicator">,</span> <span class="nv">asides/recent_posts.html</span><span class="p-Indicator">,</span> <span class="nv">custom/asides/visitor.html</span><span class="p-Indicator">]</span>
</span><span class="line">
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="section-2">4. 添加评论系统</h4>
<p>我没有使用Octopress默认的Disqus, 国内比较常用的有 <code>多说</code> 和 <code>友言</code>, 我采用了 <code>友言</code> .
   具体配置详情见<a href="http://pangyi.github.io/blog/20150125/shi-yong-you-yan-zuo-octopressde-ping-lun-xi-tong-,shi-yong-jia-wang-zuo-fen-xiang/">这里</a>.</p>

]]></content>
  </entry>
  
</feed>
